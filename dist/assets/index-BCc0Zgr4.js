import{N as se,O as oe,Q as j,R as ae,r as u,T as le,U as ne,aa as q,at as Q,aq as ie,au as ce,W as re,g as v,ac as de,Z as ue,ag as fe,av as ve,$ as pe,_ as he,u as me,b as _e,a as ge,d as we,o as w,c as L,f as s,w as E,h as k,A as G,s as M,F as A,ai as ke,aw as X,j as Z,C as V,i as x,ax as ye,a5 as J,E as z,ay as be,L as Ce,p as xe,m as Be}from"./index-BvrlI3rd.js";import{L as Se}from"./index-rxo48PJE.js";/* empty css              */import{I as Te}from"./index-CqHXZlWv.js";import{E as $e}from"./index-CqtRLwuI.js";import"./index-B85MVH_x.js";import{_ as Ee,S as Ie}from"./search-BFsDTHEv.js";import{T as Pe,a as Le}from"./index-DrMqqINR.js";import"./index-tn7Hb5pv.js";import{N as Fe}from"./index-NAKdCZg-.js";import{B as We}from"./index-CBKMO47e.js";import"./use-id-n9qlotU8.js";import"./use-route-BBWwet07.js";import"./use-placeholder-DFyJNJBY.js";const[Ne,O]=se("swipe-cell"),Re={name:oe(""),disabled:Boolean,leftWidth:j,rightWidth:j,beforeClose:Function,stopPropagation:Boolean};var De=ae({name:Ne,props:Re,emits:["open","close","click"],setup(n,{emit:m,slots:B}){let p,S,I,y;const i=u(),r=u(),b=u(),c=le({offset:0,dragging:!1}),d=ne(),_=e=>e.value?de(e).width:0,C=q(()=>Q(n.leftWidth)?+n.leftWidth:_(r)),P=q(()=>Q(n.rightWidth)?+n.rightWidth:_(b)),g=e=>{c.offset=e==="left"?C.value:-P.value,p||(p=!0,m("open",{name:n.name,position:e}))},T=e=>{c.offset=0,p&&(p=!1,m("close",{name:n.name,position:e}))},F=e=>{const a=Math.abs(c.offset),h=.15,D=p?1-h:h,N=e==="left"?C.value:P.value;N&&a>N*D?g(e):T(e)},R=e=>{n.disabled||(I=c.offset,d.start(e))},$=e=>{if(n.disabled)return;const{deltaX:a}=d;d.move(e),d.isHorizontal()&&(S=!0,c.dragging=!0,(!p||a.value*I<0)&&ue(e,n.stopPropagation),c.offset=fe(a.value+I,-P.value,C.value))},W=()=>{c.dragging&&(c.dragging=!1,F(c.offset>0?"left":"right"),setTimeout(()=>{S=!1},0))},t=(e="outside")=>{y||(m("click",e),p&&!S&&(y=!0,ve(n.beforeClose,{args:[{name:n.name,position:e}],done:()=>{y=!1,T(e)},canceled:()=>y=!1,error:()=>y=!1})))},o=(e,a)=>h=>{a&&h.stopPropagation(),t(e)},f=(e,a)=>{const h=B[e];if(h)return v("div",{ref:a,class:O(e),onClick:o(e,!0)},[h()])};return ie({open:g,close:T}),ce(i,()=>t("outside"),{eventName:"touchstart"}),re("touchmove",$,{target:i}),()=>{var e;const a={transform:`translate3d(${c.offset}px, 0, 0)`,transitionDuration:c.dragging?"0s":".6s"};return v("div",{ref:i,class:O(),onClick:o("cell",S),onTouchstartPassive:R,onTouchend:W,onTouchcancel:W},[v("div",{class:O("wrapper"),style:a},[f("left",r),(e=B.default)==null?void 0:e.call(B),f("right",b)])])}}});const Me=pe(De),Ae=n=>(xe("data-v-70f38711"),n=n(),Be(),n),Ve={class:"sticky top-0 z-10 pb-1.5",style:{"background-color":"#fff"}},ze={class:"mx-3 mt-6 rounded-md"},Oe={class:"p-3"},He={class:"bg-[#F2FAFA] rounded flex items-center h-[3.5rem]"},Ue={style:{width:"calc(100% - 4rem)"},class:"h-[3.5rem] flex"},je={key:0},qe=["onClick"],Qe={class:"p-3"},Ge={class:"ml-1 flex-1 mb-2 mt-2 flex flex-col justify-between"},Xe={class:"my-3"},Ze={class:""},Je={class:""},Ke={class:"text-[#939393] mr-3 py-1"},Ye={class:"text-sm"},et={class:"text-[#3B3B3B] font-semibold pl-2"},tt={class:"text-[#939393] mr-3 py-1"},st={class:"text-sm"},ot={class:"text-[#FE4938] font-semibold pl-2"},at={class:"flex justify-end mt-3"},lt={class:"text-[#AEAEAE] text-sm"},nt={class:"text-neutral-500 text-sm"},it=Ae(()=>s("div",null,null,-1)),ct={__name:"index",setup(n){const{t:m}=me(),B=_e(),p=ge(),S=()=>{p.go(-1)},I=t=>{console.log(t),p.push({path:"/goodsDetail",query:{product_id:t}})},y=u([{switch:"all",title:m("goods.all")},{switch:"1",title:m("goods.selling")},{switch:"0",title:m("goods.store")}]),i=u([]),r=u({switch:"all",page:"1",limit:"10",title:""}),b=u(!1),c=u(!1),d=u(!1),_=u(!1),C=t=>{const o=ke({message:m("goods.loading"),forbidClick:!0,duration:0});o.close(),t!==void 0&&(o.open(),i.value=[],r.value.page="1",r.value.switch=t,_.value=!1),X(r.value).then(f=>{o.close(),r.value.page++,f.data.list.length<=0?_.value=!0:i.value.push(...f.data.list),d.value=!1})},P=({name:t})=>{d.value=!0,g.value="",r.value.title="",C(t),t==="1"?(b.value=!0,c.value=!1):t==="0"?(b.value=!1,c.value=!0):(b.value=!1,c.value=!1)},g=u(""),T=async()=>{i.value=[],_.value=!1,r.value.page="1",r.value.title=g.value,d.value=!0;const t=await X(r.value);d.value=!1;let o=parseInt(r.value.page);o++,r.value.page=o.toString(),t.data.list.length<=0&&(_.value=!0),i.value.push(...t.data.list)},F=u({ids:""}),R=async t=>{event.stopPropagation(),F.value.ids=t;const o=await ye(F.value);o.code===1?(i.value=i.value.filter(f=>f.product_id!==t),J(o.msg)):z(o.msg)},$=u({id:"",switch:""}),W=async(t,o,f)=>{if(event.stopPropagation(),B.MerInfo.status===1){$.value.id=t,f===1?$.value.switch="0":$.value.switch="1";const e=await be($.value);e.code===1?J(e.msg):z(e.msg),r.value.switch=="all"?i.value=i.value.map(a=>a.product_id===o?{...a,switch:a.switch==1?0:1}:a):i.value=i.value.filter(a=>a.product_id!==o)}else z(m("over"))};return we(()=>{d.value=!0,C(),B.toGetMerInfo()}),(t,o)=>{const f=Fe,e=Le,a=Pe,h=Ie,D=$e,N=Ce,K=Te,H=We,Y=Me,ee=Se;return w(),L(A,null,[s("header",Ve,[v(f,{title:t.$t("goods.ProductManagement"),"left-text":t.$t("goback"),"left-arrow":"",border:!1,onClickLeft:S},null,8,["title","left-text"]),s("div",ze,[v(a,{onClickTab:P,color:"#009996",type:"card"},{default:E(()=>[(w(!0),L(A,null,Z(k(y),l=>(w(),V(e,{key:l.switch,name:l.switch,title:l.title},null,8,["name","title"]))),128))]),_:1}),s("div",Oe,[s("div",He,[s("div",Ue,[v(h,{class:"w-[100%]",modelValue:k(g),"onUpdate:modelValue":o[0]||(o[0]=l=>G(g)?g.value=l:null),clearable:!1,placeholder:t.$t("goods.searchinput"),onSearch:T},null,8,["modelValue","placeholder"])]),s("div",null,[s("img",{class:"h-[2rem] w-[2rem]",src:Ee,onClick:T,alt:""})])])])])]),s("main",null,[k(i).length<=0?(w(),L("div",je,[v(D)])):M("",!0),s("div",null,[v(ee,{loading:k(d),"onUpdate:loading":o[1]||(o[1]=l=>G(d)?d.value=l:null),finished:k(_),"finished-text":t.$t("goods.nomore"),onLoad:o[2]||(o[2]=l=>C()),"immediate-check":!1},{default:E(()=>[(w(!0),L(A,null,Z(k(i),(l,te)=>(w(),L("div",{class:"bg-white mx-3 mt-3 back_4",key:te},[v(Y,null,{default:E(()=>[s("div",{class:"flex p-3",onClick:U=>I(l.product_id)},[s("div",Qe,[v(K,{width:"100",height:"100",radius:"10px","lazy-load":"",src:l.goods.image},{loading:E(()=>[v(N,{type:"spinner",size:"20"})]),_:2},1032,["src"])]),s("div",Ge,[s("div",Xe,[s("span",Ze,x(l.goods.title),1)]),s("div",Je,[s("div",Ke,[s("span",Ye,x(t.$t("goods.price")),1),s("span",et,x(l.goods.sales_price),1)]),s("div",tt,[s("span",st,x(t.$t("goods.profit")),1),s("span",ot,x(l.profit),1)])]),s("div",at,[k(b)?(w(),V(H,{key:0,type:"default",size:"small",onClick:U=>W(l.id,l.product_id,l.switch)},{default:E(()=>[s("span",lt,x(t.$t("goods.OffShelf")),1)]),_:2},1032,["onClick"])):M("",!0),k(c)?(w(),V(H,{key:1,type:"default",size:"small",onClick:U=>R(l.product_id),color:"#F5F6F6",style:{border:"1px solid #CBCBCB"}},{default:E(()=>[s("span",nt,x(t.$t("goods.remove")),1)]),_:2},1032,["onClick"])):M("",!0)])])],8,qe),it]),_:2},1024)]))),128))]),_:1},8,["loading","finished","finished-text"])])])],64)}}},Ct=he(ct,[["__scopeId","data-v-70f38711"]]);export{Ct as default};
