import{N as ce,R as de,a7 as ue,g as d,Q as oe,a8 as J,L as me,a9 as ve,$ as fe,O as ee,r as m,U as we,aa as j,W as ke,ab as ne,ac as le,ad as xe,ae as Ve,Z as Ce,af as Se,ag as $e,_ as Be,u as Ne,a as Ae,b as Te,d as Ie,o as F,c as Q,f as n,w as I,h as k,A as P,F as te,ah as Pe,ai as Le,aj as se,ak as ze,a5 as ie,E as q,H as Ee,j as re,C as Fe,i as b,a2 as Ue,al as je,I as Me}from"./index-BvrlI3rd.js";import{A as De}from"./index-C2xjknpb.js";/* empty css              */import{L as Re}from"./index-rxo48PJE.js";import{I as He}from"./index-CqHXZlWv.js";import{C as Xe}from"./index-B-cXZ80y.js";import"./index-B85MVH_x.js";import{_ as Ye,S as Oe}from"./search-BFsDTHEv.js";import{T as Qe,a as qe}from"./index-DrMqqINR.js";import"./index-tn7Hb5pv.js";import{N as Ge}from"./index-NAKdCZg-.js";import{B as Ke}from"./index-CBKMO47e.js";import"./use-route-BBWwet07.js";import"./use-id-n9qlotU8.js";import"./use-placeholder-DFyJNJBY.js";const[We,ae]=ce("switch"),Ze={size:oe,loading:Boolean,disabled:Boolean,modelValue:J,activeColor:String,inactiveColor:String,activeValue:{type:J,default:!0},inactiveValue:{type:J,default:!1}};var Je=de({name:We,props:Ze,emits:["change","update:modelValue"],setup(a,{emit:p,slots:w}){const _=()=>a.modelValue===a.activeValue,v=()=>{if(!a.disabled&&!a.loading){const f=_()?a.inactiveValue:a.activeValue;p("update:modelValue",f),p("change",f)}},x=()=>{if(a.loading){const f=_()?a.activeColor:a.inactiveColor;return d(me,{class:ae("loading"),color:f},null)}if(w.node)return w.node()};return ue(()=>a.modelValue),()=>{var f;const{size:B,loading:i,disabled:c,activeColor:u,inactiveColor:V}=a,g=_(),L={fontSize:ve(B),backgroundColor:g?u:V};return d("div",{role:"switch",class:ae({on:g,loading:i,disabled:c}),style:L,tabindex:c?void 0:0,"aria-checked":g,onClick:v},[d("div",{class:ae("node")},[x()]),(f=w.background)==null?void 0:f.call(w)])}}});const et=fe(Je),[tt,U]=ce("slider"),at={min:ee(0),max:ee(100),step:ee(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:oe,buttonSize:oe,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}};var ot=de({name:tt,props:at,emits:["change","dragEnd","dragStart","update:modelValue"],setup(a,{emit:p,slots:w}){let _,v,x;const f=m(),B=[m(),m()],i=m(),c=we(),u=j(()=>Number(a.max)-Number(a.min)),V=j(()=>{const e=a.vertical?"width":"height";return{background:a.inactiveColor,[e]:ve(a.barHeight)}}),g=e=>a.range&&Array.isArray(e),L=()=>{const{modelValue:e,min:l}=a;return g(e)?`${(e[1]-e[0])*100/u.value}%`:`${(e-Number(l))*100/u.value}%`},M=()=>{const{modelValue:e,min:l}=a;return g(e)?`${(e[0]-Number(l))*100/u.value}%`:"0%"},D=j(()=>{const l={[a.vertical?"height":"width"]:L(),background:a.activeColor};i.value&&(l.transition="none");const t=()=>a.vertical?a.reverse?"bottom":"top":a.reverse?"right":"left";return l[t()]=M(),l}),N=e=>{const l=+a.min,t=+a.max,o=+a.step;e=$e(e,l,t);const r=Math.round((e-l)/o)*o;return Ve(l,r)},C=()=>{const e=a.modelValue;g(e)?x=e.map(N):x=N(e)},R=e=>{var l,t;const o=(l=e[0])!=null?l:Number(a.min),r=(t=e[1])!=null?t:Number(a.max);return o>r?[r,o]:[o,r]},y=(e,l)=>{g(e)?e=R(e).map(N):e=N(e),ne(e,a.modelValue)||p("update:modelValue",e),l&&!ne(e,x)&&p("change",e)},G=e=>{if(e.stopPropagation(),a.disabled||a.readonly)return;C();const{min:l,reverse:t,vertical:o,modelValue:r}=a,h=le(f),z=()=>o?t?h.bottom-e.clientY:e.clientY-h.top:t?h.right-e.clientX:e.clientX-h.left,W=o?h.height:h.width,T=Number(l)+z()/W*u.value;if(g(r)){const[Y,O]=r,Z=(Y+O)/2;T<=Z?y([T,O],!0):y([Y,T],!0)}else y(T,!0)},K=e=>{a.disabled||a.readonly||(c.start(e),v=a.modelValue,C(),i.value="start")},S=e=>{if(a.disabled||a.readonly)return;i.value==="start"&&p("dragStart",e),Ce(e,!0),c.move(e),i.value="dragging";const l=le(f),t=a.vertical?c.deltaY.value:c.deltaX.value,o=a.vertical?l.height:l.width;let r=t/o*u.value;if(a.reverse&&(r=-r),g(x)){const h=a.reverse?1-_:_;v[h]=x[h]+r}else v=x+r;y(v)},H=e=>{a.disabled||a.readonly||(i.value==="dragging"&&(y(v,!0),p("dragEnd",e)),i.value="")},$=e=>typeof e=="number"?U("button-wrapper",["left","right"][e]):U("button-wrapper",a.reverse?"left":"right"),X=(e,l)=>{const t=i.value==="dragging";if(typeof l=="number"){const o=w[l===0?"left-button":"right-button"];let r;if(t&&Array.isArray(v)&&(r=v[0]>v[1]?_^1:_),o)return o({value:e,dragging:t,dragIndex:r})}return w.button?w.button({value:e,dragging:t}):d("div",{class:U("button"),style:Se(a.buttonSize)},null)},A=e=>{const l=typeof e=="number"?a.modelValue[e]:a.modelValue;return d("div",{ref:B[e??0],role:"slider",class:$(e),tabindex:a.disabled?void 0:0,"aria-valuemin":a.min,"aria-valuenow":l,"aria-valuemax":a.max,"aria-disabled":a.disabled||void 0,"aria-readonly":a.readonly||void 0,"aria-orientation":a.vertical?"vertical":"horizontal",onTouchstartPassive:t=>{typeof e=="number"&&(_=e),K(t)},onTouchend:H,onTouchcancel:H,onClick:xe},[X(l,e)])};return y(a.modelValue),ue(()=>a.modelValue),B.forEach(e=>{ke("touchmove",S,{target:e})}),()=>d("div",{ref:f,style:V.value,class:U({vertical:a.vertical,disabled:a.disabled}),onClick:G},[d("div",{class:U("bar"),style:D.value},[a.range?[A(0),A(1)]:A()])])}});const nt=fe(ot),lt={class:"bg-white h-[12rem]"},st={class:"mt-3"},it={class:"p-3"},rt={class:"bg-[#F2FAFA] rounded flex items-center h-[3.5rem]"},ct={style:{width:"calc(100% - 4rem)"},class:"h-[3.5rem] flex"},dt={class:"mx-3 mt-1",style:{height:"calc(100vh - 19rem)","overflow-y":"auto","overflow-x":"hidden"}},ut={class:"mt-3"},mt={class:"grid grid-cols-2 grid-flow-row gap-2"},vt={class:"flex justify-end pt-3 px-3"},ft={class:"rounded pl-2 py-2"},gt={class:"px-3"},ht=["onClick"],bt={class:"mt-4"},_t={class:"text-base"},yt={class:"text-sm text-gray-400 mr-1"},pt={class:"text-sm"},wt={class:"text-base",style:{"margin-left":"10px"}},kt={class:"text-sm text-gray-400 mr-1"},xt={class:"text-sm text-[#EB4E3D]"},Vt={class:"mt-2 pt-2 py-[1rem]"},Ct=["onClick"],St={class:"btn fixed bottom-0 bg-white w-[100vw] h-[6rem] p-3 px-[1.8rem]"},$t={class:"px-6 tc bg-[#F8F8F8]"},Bt={class:"text-xl pt-10"},Nt={class:"p-6 flex justify-between items-center bg-white rounded mt-6 h-[3.5rem]"},At={class:"bg-white my-4 rounded p-6"},Tt={class:"flex justify-between items-center"},It={class:"flex justify-center items-center bg-white mt-10 mb-3"},Pt={__name:"index",setup(a){const{t:p}=Ne(),w=Ae(),_=Te(),v=m(0),x=()=>{w.go(-1)},f=m([]);localStorage.getItem("lang");const B=()=>{Pe().then(t=>{f.value=t.data,console.log(f.value),g()}).catch(t=>{console.log(t)})},i=m({category_id:"0",title:"",page:"1",limit:"10"}),c=m([]),u=m(!1),V=m(!1),g=t=>{const o=Le({message:p("distribution.loading"),forbidClick:!0});o.close(),t||t===0?(c.value=[],i.value.page="1",i.value.category_id=t,V.value=!1,o.open()):i.value.category_id=v.value,e.value&&(i.value.min_price=X,i.value.max_price=A,i.value.isPriceFiltering=e.value),se(i.value).then(r=>{console.log("加载成功"),o.close(),u.value=!1;let h=parseInt(i.value.page);h++,i.value.page=h.toString(),r.data.list.length<=0&&(V.value=!0),e.value?c.value.push(...r.data.list):c.value.push(...r.data.list),c.value.forEach(z=>{z.checked=!1})})},L=({name:t})=>{u.value=!0,C.value="",i.value.title="",g(t)},M=t=>{console.log(t),w.push({path:"/goodsDetail",query:{product_id:t}})},D=m({ids:""}),N=async t=>{if(_.MerInfo.status===1){D.value.ids=t;const o=await je(D.value);c.value=c.value.filter(r=>r.product_id!==t),o.code==1?ie(o.msg):q(o.msg)}else q(p("over"))},C=m(""),R=async()=>{c.value=[],V.value=!1,i.value.page="1",i.value.title=C.value,u.value=!0;const t=await se(i.value);console.log(t),u.value=!1;let o=parseInt(i.value.page);o++,i.value.page=o.toString(),t.data.list.length<=0&&(V.value=!0),c.value.push(...t.data.list)},y=m({ids:[]}),G=t=>{console.log(t),c.value.forEach(o=>{o.product_id==t&&(o.checked=!o.checked)})},K=async()=>{if(_.MerInfo.status===1)if(c.value.forEach(t=>{t.checked==!0&&y.value.ids.push(t.product_id)}),console.log(y.value.ids.length),y.value.ids.length>0){const t=await ze(y.value);t.code==1?(c.value=c.value.filter(o=>!y.value.ids.includes(o.product_id)),y.value.ids=[],ie(t.msg)):q(t.msg)}else Ee(p("distribution.chooseProduct"));else q(p("over"))},S=m(!1),H=t=>{S.value=t},$=m([0,50]),X=j(()=>$.value[0]*100),A=j(()=>$.value[1]*100),e=m(!1),l=()=>{u.value=!0,S.value=!1,c.value=[],g()};return Ie(()=>{B(),_.toGetMerInfo()}),(t,o)=>{const r=Me,h=Ge,z=qe,W=Qe,T=Oe,Y=Xe,O=me,Z=He,ge=Re,he=Ke,be=et,_e=nt,ye=De;return F(),Q(te,null,[n("header",lt,[d(h,{"left-text":t.$t("goback"),title:t.$t("distribution.distributionCenter"),"left-arrow":"",onClickLeft:x},{right:I(()=>[d(r,{color:"#009996",name:"todo-list",size:"22px",onClick:o[0]||(o[0]=s=>H(!0))})]),_:1},8,["left-text","title"]),n("div",st,[d(W,{active:k(v),"onUpdate:active":o[1]||(o[1]=s=>P(v)?v.value=s:null),"line-height":"3rem",color:"#009996",onClickTab:L,type:"card",border:!1},{default:I(()=>[(F(!0),Q(te,null,re(k(f),s=>(F(),Fe(z,{key:s.category_id,name:s.category_id,title:s.name},null,8,["name","title"]))),128))]),_:1},8,["active"]),n("div",it,[n("div",rt,[n("div",ct,[d(T,{class:"w-[100%]",modelValue:k(C),"onUpdate:modelValue":o[2]||(o[2]=s=>P(C)?C.value=s:null),clearable:!1,placeholder:t.$t("distribution.inputsearch"),onSearch:R},null,8,["modelValue","placeholder"])]),n("div",null,[n("img",{class:"h-[2rem] w-[2rem]",src:Ye,onClick:R,alt:""})])])])])]),n("main",dt,[n("div",ut,[d(ge,{loading:k(u),"onUpdate:loading":o[3]||(o[3]=s=>P(u)?u.value=s:null),finished:k(V),"finished-text":t.$t("distribution.nomore"),"immediate-check":!1,onLoad:o[4]||(o[4]=s=>g())},{default:I(()=>[n("div",mt,[(F(!0),Q(te,null,re(k(c),(s,pe)=>(F(),Q("div",{class:"bg-white rounded-md back_4",key:pe},[n("div",vt,[d(Y,{modelValue:s.clicked,"onUpdate:modelValue":E=>s.clicked=E,"checked-color":"#009996",onClick:E=>G(s.product_id)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),n("div",ft,[d(Z,{src:s.image,block:"",fit:"fill",height:"12rem","lazy-load":"",radius:"10px",width:"12rem",onClick:E=>M(s.product_id)},{loading:I(()=>[d(O,{size:"20",type:"spinner"})]),_:2},1032,["src","onClick"])]),n("div",gt,[n("div",{class:"w-[100%] text-base text-ellipsis",onClick:E=>M(s.product_id)},b(s.title),9,ht),n("div",bt,[n("span",_t,[n("span",yt,b(t.$t("distribution.sells")),1),n("span",pt," $"+b(s.sales_price),1)]),n("span",wt,[n("span",kt,b(t.$t("distribution.profit")),1),n("span",xt," $"+b(s.profit),1)])]),n("div",Vt,[n("div",{class:"h-[2.5rem] w-[100%]] bg-[#009996] text-white px-3 flex justify-center items-center rounded-md py-1",onClick:E=>N(s.product_id)},b(t.$t("distribution.distribution")),9,Ct)])])]))),128))])]),_:1},8,["loading","finished","finished-text"])])]),n("view",St,[d(he,{color:"rgba(0, 0, 0, 0.8)",round:"",size:"small",style:{width:"100%",height:"3.5rem",background:"#009996","box-shadow":"0px 20px 48px -18px rgba(0,153,150,0.3)","border-radius":"6px",border:"none"},onClick:K},{default:I(()=>[Ue(b(t.$t("distribution.distributionAll")),1)]),_:1})]),d(ye,{show:k(S),"onUpdate:show":o[8]||(o[8]=s=>P(S)?S.value=s:null)},{default:I(()=>[n("div",$t,[n("h5",Bt,b(t.$t("distribution.shaixvan")),1),n("div",Nt,[n("span",null,b(t.$t("distribution.offon")),1),d(be,{modelValue:k(e),"onUpdate:modelValue":o[5]||(o[5]=s=>P(e)?e.value=s:null),"active-color":"#009996","inactive-color":"#dcdee0"},null,8,["modelValue"])]),n("div",At,[n("div",Tt,[n("div",null,[n("span",null,b(t.$t("distribution.mini")),1),n("span",null,b(k(X)),1)]),n("div",null,[n("span",null,b(t.$t("distribution.max")),1),n("span",null,b(k(A)),1)])]),n("div",It,[d(_e,{"button-size":"1.3rem","active-color":"#009996",modelValue:k($),"onUpdate:modelValue":o[6]||(o[6]=s=>P($)?$.value=s:null),range:""},null,8,["modelValue"])])]),n("div",{class:"text-sm text-white ml-auto p-3 bg-black rounded-md text-center mb-6 btn flex justify-center items-center",onClick:o[7]||(o[7]=s=>l())},b(t.$t("distribution.submit")),1)])]),_:1},8,["show"])],64)}}},Gt=Be(Pt,[["__scopeId","data-v-3502b353"]]);export{Gt as default};
