import{_ as nt,u as rt,a as it,b as dt,r as c,q as ct,o as l,c as n,f as e,g as f,w as x,h as u,i as a,s as p,A as D,F as V,a0 as ut,H as _t,E as k,a1 as pt,j as O,C as mt,a2 as ft,L as vt,p as ht,m as gt,a3 as R,a4 as yt,a5 as G,a6 as kt}from"./index-BvrlI3rd.js";import{A as xt}from"./index-C2xjknpb.js";import{_ as wt}from"./index-CFt-v6jw.js";/* empty css              */import{L as bt}from"./index-rxo48PJE.js";import{I as $t}from"./index-CqHXZlWv.js";import{C as Ct}from"./index-B-cXZ80y.js";import{E as Pt}from"./index-CqtRLwuI.js";import{T as St,a as Ft}from"./index-DrMqqINR.js";import"./index-tn7Hb5pv.js";import{t as Et}from"./index-DIm44zLX.js";import{B as It}from"./index-CBKMO47e.js";import"./use-id-n9qlotU8.js";import"./use-route-BBWwet07.js";import"./use-placeholder-DFyJNJBY.js";const Lt=w=>(ht("data-v-4c3d278c"),w=w(),gt(),w),Tt={class:"sticky top-0 z-10 p-6 px-3 w-dvw back_4 bg-white"},jt={key:0,class:"grid grid-cols-2 gap-4 justify-items-center mx-3 mt-2 bg-[#F2FAFA]"},At={class:"flex flex-col my-2 items-center"},Vt={class:"text-gray-600"},Mt={class:"text-lg font-semibold text-[#FE4857] mt-3"},zt={class:"flex flex-col my-2 items-center"},Bt={class:"text-gray-600"},Ut={class:"text-lg font-semibold text-[#FE4857] mt-3"},Nt={class:"pb-20"},qt={key:0},Dt={class:"bg-white mx-3 mt-3 rounded-md back_3 back_4"},Ot={class:"flex items-center pt-1.5 zt"},Rt={key:0,class:"ml-auto"},Gt={key:1,class:"ml-auto mr-3"},Ht={key:2,class:"ml-auto mr-3"},Qt={key:3,class:"ml-auto"},Jt={key:4,class:"ml-auto"},Kt={key:5,class:"ml-auto"},Wt={key:6,class:"ml-auto"},Xt={key:7,class:"ml-auto"},Yt={key:8,class:"flex justify-end"},Zt=["onClick"],ts={class:"mt-2"},ss={class:"ml-3 mt-3 flex-1 mr-1 flex flex-col"},es={class:"-mt-2"},os={class:"",style:{"line-height":"16px"}},as={class:"flex mt-2 mr-2 justify-between items-center"},ls={class:"text-right flex justify-items-start items-center"},ns={class:"text-[#939393] text-sm mr-2"},rs={class:"font-semibold text-sm"},is={class:"text-right flex justify-items-start items-center"},ds={class:"text-[#939393] text-sm mr-2"},cs={class:"font-semibold text-sm"},us={class:"flex mt-2 mr-2 justify-between items-center"},_s={class:"text-right flex justify-items-start items-center"},ps={class:"text-[#939393] text-sm mr-2"},ms={class:"font-semibold text-sm"},fs={class:"text-right flex justify-items-start items-center"},vs={class:"text-[#939393] text-sm mr-2"},hs={class:"font-semibold text-sm text-[#FE4857]"},gs={class:"flex items-center pb-3 pt-1"},ys=Lt(()=>e("span",{class:"mx-3"},null,-1)),ks=["onClick"],xs={key:1,class:"fixed bottom-28 left-12 button_1 w-[100vw] flex justify-center"},ws={__name:"index",setup(w){const{t:r}=rt(),M=it(),b=dt(),H=c([{status:"all",title:r("order.all")},{status:"0",title:r("order.waitingForPayment")},{status:"5",title:r("order.awaitingPickup")},{status:"1",title:r("order.waitingForShipment")},{status:"2",title:r("order.shipped")},{status:"3",title:r("order.received")},{status:"4",title:r("order.completed")},{status:"-1",title:r("order.canceled")},{status:"-2",title:r("order.refunded")}]),z=c(""),Q=({name:t})=>{z.value=t,g.value=!0,E(t),console.log(t)},i=c([]),h=c({status:"all",page:"1",limit:"4"}),g=c(!1),P=c(!1),S=c(""),F=c(""),E=t=>{(t||t===0)&&(i.value=[],h.value.page="1",h.value.status=t,P.value=!1),ut(h.value).then(o=>{S.value=o.data.total_price,F.value=o.data.total_profit,console.log(S.value),console.log(F.value),g.value=!1;let _=parseInt(h.value.page);_++,h.value.page=_.toString(),o.data.list.length<=0&&(P.value=!0),i.value.push(...o.data.list),i.value.forEach(d=>{d.checked=!1}),i.value.forEach(d=>{d.delivery_status===1?d.deliverystatus=r("order.inTransit"):d.delivery_status===2?d.deliverystatus=r("order.reached"):d.delivery_status===3?d.deliverystatus=r("order.pendingSettlement"):d.deliverystatus=r("order.settled")})})},I=c(""),J=async(t,o)=>{if(b.MerInfo.status===1){v.value=!0,T.value.order_id=t;const _=parseFloat(o);I.value=_.toFixed(2).toString()}else k(r("over"))},y=c({ids:[]}),$=c([]),K=(t,o)=>{console.log(t,o),i.value.forEach(m=>{m.order_id==t&&(m.checked=!m.checked)}),i.value.forEach(m=>{m.order_id==t&&($.value.push(m.total_cost),console.log($.value))});const d=$.value.map(m=>parseFloat(m)).reduce((m,A)=>m+A,0);console.log(d);const j=d.toFixed(2);I.value=j.toString()},W=async()=>{b.MerInfo.status===1?(i.value.forEach(t=>{t.checked==!0&&y.value.ids.push(t.order_id)}),y.value.ids.length>0?v.value=!0:_t(r("order.selectProduct"))):k(r("over"))},X=async()=>{if((await R(L.value)).code==1){const o=await yt(y.value);o.code==1?(h.value.status==="all"?i.value.forEach(_=>{_.is_pick=1}):i.value=i.value.filter(_=>!y.value.ids.includes(_.order_id)),y.value.ids=[],$.value=[],G(o.msg),v.value=!1):k(o.msg)}},v=c(!1),L=c({password_pay:""}),T=c({order_id:""}),Y=async()=>{const t=await R(L.value);t.code==1?kt(T.value).then(o=>{o.code==1?(v.value=!1,G(o.msg),i.value=i.value.filter(_=>_.order_id!==T.value.order_id)):k(o.msg)}):b.MerInfo.have_pay===1?k(t.msg):(k(t.msg),M.push("/setPaypwd"))},Z=t=>{L.value.password_pay=t,console.log(t),y.value.ids.length<=0?Y():X()};return ct(()=>{g.value=!0,E(h.value.status),b.toGetMerInfo()}),(t,o)=>{const _=Ft,d=St,j=Pt,m=Ct,A=vt,tt=$t,st=bt,et=It,ot=wt,at=xt,lt=pt;return l(),n(V,null,[e("header",Tt,[f(d,{onClickTab:Q,color:"#009996",type:"card"},{default:x(()=>[(l(!0),n(V,null,O(u(H),s=>(l(),mt(_,{key:s.status,name:s.status,title:s.title,class:"relative"},null,8,["name","title"]))),128))]),_:1})]),u(z)==="1"?(l(),n("div",jt,[e("div",At,[e("span",Vt,a(t.$t("order.totalPayment")),1),e("span",Mt,"$"+a(u(S)),1)]),e("div",zt,[e("span",Bt,a(t.$t("order.earnings")),1),e("span",Ut,"$"+a(u(F)),1)])])):p("",!0),e("main",Nt,[u(i).length<=0?(l(),n("div",qt,[f(j,{description:t.$t("order.empty"),image:t.img,"image-size":"17rem"},null,8,["description","image"])])):p("",!0),f(st,{loading:u(g),"onUpdate:loading":o[0]||(o[0]=s=>D(g)?g.value=s:null),finished:u(P),"immediate-check":!1,"finished-text":t.$t("order.noMore"),onLoad:o[1]||(o[1]=s=>E())},{default:x(()=>[(l(!0),n(V,null,O(u(i),s=>{var B,U,N,q;return l(),n("div",Dt,[e("div",Ot,[s.status===0?(l(),n("span",Rt,a(t.$t("order.pendingPayment")),1)):p("",!0),s.is_pick===1&&s.status===1?(l(),n("span",Gt,a(t.$t("order.pendingShipment")),1)):p("",!0),s.is_pick===0&&s.status===1?(l(),n("span",Ht,a(t.$t("order.awaitingPickup")),1)):p("",!0),s.status===2?(l(),n("span",Qt,a(s.deliverystatus),1)):p("",!0),s.status===3?(l(),n("span",Jt,a(t.$t("order.received")),1)):p("",!0),s.status===4?(l(),n("span",Kt,a(t.$t("order.completed")),1)):p("",!0),s.status===-1?(l(),n("span",Wt,a(t.$t("order.canceled")),1)):p("",!0),s.status===-2?(l(),n("span",Xt,a(t.$t("order.refunded")),1)):p("",!0),s.is_pick===0&&s.status===1?(l(),n("div",Yt,[f(m,{modelValue:s.clicked,"onUpdate:modelValue":C=>s.clicked=C,onClick:C=>K(s.order_id,s.total_cost)},null,8,["modelValue","onUpdate:modelValue","onClick"])])):p("",!0)]),e("div",{class:"flex mx-3",onClick:C=>u(M).push({path:"/orderDetail",query:{id:s.order_id}})},[e("div",ts,[f(tt,{src:(B=s.orderProduct[0])!=null&&B.goods.image?(U=s.orderProduct[0])==null?void 0:U.goods.image:"@/assets/images/no img.png",height:"100","lazy-load":"",radius:"10px",width:"100"},{loading:x(()=>[f(A,{size:"20",type:"spinner"})]),_:2},1032,["src"])]),e("div",ss,[e("div",es,[e("span",os,a((N=s.orderProduct[0])!=null&&N.goods.title?(q=s.orderProduct[0])==null?void 0:q.goods.title:t.$t("notitle")),1)]),e("div",as,[e("div",ls,[e("span",ns,a(t.$t("order.quantity")),1),e("span",rs,a(s.total_num),1)]),e("div",is,[e("span",ds,a(t.$t("order.totalCost")),1),e("span",cs," $ "+a(s.total_cost),1)])]),e("div",us,[e("div",_s,[e("span",ps,a(t.$t("order.sellingPrice")),1),e("span",ms," $ "+a(s.total_price),1)]),e("div",fs,[e("span",vs,a(t.$t("order.earnings")),1),e("span",hs," $ "+a(s.total_profit),1)])])])],8,Zt),e("div",gs,[ys,s.is_pick===0&&s.status===1?(l(),n("span",{key:0,class:"ml-auto mr-3 border-solid border border-white rounded-md py-1.5 px-3 bg-black text-white",onClick:C=>J(s.order_id,s.total_cost)},a(t.$t("order.clickToPickup")),9,ks)):p("",!0)])])}),256))]),_:1},8,["loading","finished","finished-text"]),u(h).status==="all"||u(h).status==="5"?(l(),n("div",xs,[f(et,{color:"#009996",round:"",size:"small",style:{width:"90%",height:"3.5rem"},onClick:W},{default:x(()=>[ft(a(t.$t("order.pickupAll")),1)]),_:1})])):p("",!0)]),f(at,{show:u(v),"onUpdate:show":o[3]||(o[3]=s=>D(v)?v.value=s:null),overlay:!1,round:!1},{default:x(()=>[f(ot,{price:u(I),onClose:o[2]||(o[2]=()=>v.value=!1),onSendData:Z,style:{height:"54vh"}},null,8,["price"])]),_:1},8,["show"]),f(lt,{show:u(v),onClick:o[4]||(o[4]=s=>v.value=!1)},null,8,["show"]),f(Et)],64)}}},Bs=nt(ws,[["__scopeId","data-v-4c3d278c"]]);export{Bs as default};
